<!DOCTYPE html>
<html lang="zh">
<head>
<meta charset="UTF-8">
<title>For You ❤️</title>
<style>
html,body{
  margin:0;
  padding:0;
  overflow:hidden;
  background:black;
}
canvas{
  position:absolute;
  top:0;left:0;
}
#text{
  position:absolute;
  top:40%;
  width:100%;
  text-align:center;
  font-size:42px;
  color:#ff9acb;
  font-family:"微软雅黑";
  opacity:0;
  transition:opacity 1s;
  text-shadow:0 0 10px pink;
}
</style>
</head>
<body>
<canvas id="c"></canvas>
<div id="text"></div>

<!-- 背景音乐（可替换成你喜欢的音乐链接） -->
<audio id="bgm" loop>
  <source src="https://cdn.pixabay.com/download/audio/2022/03/15/audio_aa1b2a1e4b.mp3?filename=romantic-ambient-113397.mp3" type="audio/mpeg">
</audio>

<script>
const canvas=document.getElementById("c");
const ctx=canvas.getContext("2d");
canvas.width=window.innerWidth;
canvas.height=window.innerHeight;

let particles=[];

function heartShape(t){
  return {
    x:16*Math.pow(Math.sin(t),3),
    y:-(13*Math.cos(t)-5*Math.cos(2*t)-2*Math.cos(3*t)-Math.cos(4*t))
  };
}

function Firework(){
  this.x=Math.random()*canvas.width;
  this.y=canvas.height;
  this.targetY=Math.random()*canvas.height/2+100;
  this.exploded=false;
  this.color=`hsl(${Math.random()*360},100%,60%)`;
}

Firework.prototype.update=function(){
  this.y-=5;
  if(this.y<=this.targetY && !this.exploded){
    this.exploded=true;
    for(let i=0;i<100;i++){
      let t=Math.random()*Math.PI*2;
      let p=heartShape(t);
      particles.push({
        x:this.x,
        y:this.y,
        vx:p.x*0.3,
        vy:p.y*0.3,
        life:80,
        color:this.color
      });
    }
  }
}

let fireworks=[];

function animate(){
  ctx.fillStyle="rgba(0,0,0,0.2)";
  ctx.fillRect(0,0,canvas.width,canvas.height);

  if(Math.random()<0.04){
    fireworks.push(new Firework());
  }

  fireworks.forEach(f=>f.update());

  particles.forEach((p,i)=>{
    p.x+=p.vx;
    p.y+=p.vy;
    p.life--;
    ctx.beginPath();
    ctx.arc(p.x,p.y,2,0,Math.PI*2);
    ctx.fillStyle=p.color;
    ctx.fill();
    if(p.life<=0) particles.splice(i,1);
  });

  requestAnimationFrame(animate);
}
animate();

// 文字动画
const text=document.getElementById("text");

setTimeout(()=>{
  text.innerText="嘉晗，你知道吗？";
  text.style.opacity=1;
},1500);

setTimeout(()=>{
  text.style.opacity=0;
},3500);

setTimeout(()=>{
  text.innerText="我仍然好爱你！";
  text.style.opacity=1;
},1500);

setTimeout(()=>{
  text.style.opacity=0;
},3500);

setTimeout(()=>{
  text.innerText="如果能够再来一次....";
  text.style.opacity=1;
},1500);

setTimeout(()=>{
  text.style.opacity=0;
},3500);

setTimeout(()=>{
  text.innerText="我们好好相爱吧！";
  text.style.opacity=1;
},1500);

// 音乐自动播放（需要用户点击一次）
document.body.addEventListener("click",()=>{
  document.getElementById("bgm").play();
},{once:true});
</script>
</body>
</html>
